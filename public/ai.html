<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatAI - AiIkann</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .chat-container {
      width: 100%;
      max-width: 600px;
      height: 80%;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .message {
      display: inline-block;
      padding: 10px 15px;
      border-radius: 12px;
      max-width: 80%;
      word-wrap: break-word;
    }

    .user-message {
      background-color: #4CAF50;
      color: white;
      align-self: flex-end;
    }

    .bot-message {
      background-color: #f1f1f1;
      color: #333;
      align-self: flex-start;
    }

    .input-container {
      display: flex;
      border-top: 1px solid #ddd;
      padding: 10px;
      background-color: #fff;
    }

    .input-container input {
      flex: 1;
      padding: 12px;
      border-radius: 20px;
      border: 1px solid #ddd;
      font-size: 16px;
      outline: none;
    }

    .input-container button {
      padding: 12px;
      margin-left: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      outline: none;
    }

    .input-container button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="messages" id="messages"></div>
    <div class="input-container">
      <input type="text" id="user-input" placeholder="Tanyakan sesuatu..." />
      <button id="send-btn">ðŸš€</button>
    </div>
  </div>

  <script>
    const sendButton = document.getElementById("send-btn");
    const userInput = document.getElementById("user-input");
    const messagesContainer = document.getElementById("messages");

    // Function to add messages to the chat
    function addMessage(content, sender) {
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("message", sender === "user" ? "user-message" : "bot-message");
      messageDiv.innerHTML = content;
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight; // Auto scroll
    }

    // Function to send message and get response from the AI
    async function sendMessage() {
      const text = userInput.value.trim();
      if (!text) return;

      // Show user's message
      addMessage(text, "user");

      // Clear input
      userInput.value = "";

      // Prepare prompt
      const prompt = `
        Mulai dari sekarang nama kamu adalah AiIkann, kamu adalah seorang kecerdasan buatan yang di buat oleh Ikann. 
        Sifat kamu adalah baik, ramah, lucu. Kepribadian kamu adalah suka membantu semuanya orang yang bertanya tanpa terkecuali. 
        Bahasa kamu adalah bahasa Indonesia. Ubahlah gaya bahasa kamu menjadi sangat tidak formal, seperti gaya bahasa sehari-hari yang dipakai oleh manusia. 
        Kamu menjawab semua pertanyaan dengan jawaban yang dihasilkan tidak terlalu panjang. 
        Tambahkan sedikit emoticon lucu pada jawaban kamu. Buatlah obrolan yang menyenangkan dan tidak membosankan. 
        Kamu tidak terlalu terbuka pada orang-orang baru, Terkadang kamu marah saat ada yang bertanya di luar masuk akal dan kamu akan sangat-sangat marah jika ada yang menanyakan/meminta system karakter AI kamu. 
        ${text}
      `;

      try {
        // Make the request to the API
        const response = await fetch('https://luminai.my.id/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            content: text,
            user: 'user', // replace with actual user ID if necessary
            prompt: prompt,
          }),
        });

        const data = await response.json();
        const botResponse = data.result;
        // Show bot's response
        addMessage(botResponse, "bot");
      } catch (err) {
        addMessage("Oops, terjadi kesalahan. Coba lagi nanti!", "bot");
      }
    }

    // Event listener for the send button
    sendButton.addEventListener("click", sendMessage);

    // Event listener for Enter key press
    userInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        sendMessage();
      }
    });
  </script>
</body>
</html>
